<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .item-box {width: 150px; height: 200px; background-color: whitesmoke;}
        .img {width: 150px; height: 150px; }
        .price {text-decoration: line-through;}
    </style>
    <title>Document</title>
</head>
<body>
    <h3>if-else-if else 조건문 실습</h3>
    <button id="btn">미세먼지 판별하기</button>
    <div id="dustBox" style="display: none;">
       <span>오늘의 미세먼지는</span>
       <span id="span"></span>
       <span>입니다</span>
    </div>

    <br /><br />

    <div>
        <input type="number" min="0" max="100" id="scoreInput" />
        <span>등급 : </span>
        <span id="grade"></span>
    </div>
    <!-- 스크립트 작성-->
    <script>
        const btn = document.getElementById('btn');
        let span = document.getElementById('span');

        btn.addEventListener('click', () => {
            let dust = Math.floor(Math.random() * 200);
            console.log(dust);
            if(dust < 30) {
                span.innerText = dust + "(좋음)";
            } else if(dust  < 80) {
                span.innerText = dust + "(보통)";
            } else if(dust < 150) {
                span.innerText = dust + "(나쁨)";
            } else {
                span.innerText = dust + "(매우나쁨)";
            }
            document.getElementById('dustBox').style.display = 'block';
        });

        //TODO: 1. 변수 : mathScore
        // 2. 조건식/참 => 90점 이상 : A 80점 이상 : B 70점 이상 : C 그 외 F

        const scoreInput = document.getElementById('scoreInput');
        const grade = document.getElementById('grade');

        scoreInput.addEventListener('input', () => {
            if(scoreInput.value > 100) {
                alert('100이상의 수는 입력할 수 없습니다.');
                scoreInput.value = null;
                return false;
            } else {
                if(scoreInput.value >= 90) {
                    grade.innerHTML = "A";
                } else if(scoreInput.value >= 80) {
                    grade.innerHTML = "B";
                } else if(scoreInput.value >= 70) {
                    grade.innerHTML = "C";
                } else {
                    grade.innerHTML = "F";
                }
            }
        })
        

        // // 1. let check= true 이용해서 조건식 사용
        // // 2. 참이면 document.write를 사용해서 출력
        // let check = true;
        // if (check) {
        //     document.write("<p>확인하였습니다</p>");
        // }

        // // 1. 조건식 : 맞는(같다) 단어를 입력
        // // >> let word = "의자"; word == ??
        // let word = "의자";
        // if (word == "책상") {
        //     document.write("<p>맞습니다</p>")
        // }

        
    </script>

    <div>
        <h3>상품 보기</h3>

        <div style="display: flex; justify-content: space-evenly;">
            <div class="item-box">
                <div class="img"></div>
                <div class="price">13,800원</div>
                <div class="rate"></div>
            </div>
            <div class="item-box">
                <div class="img"></div>
                <div class="price">28,000원</div>
                <div class="rate"></div>
            </div>
            <div class="item-box">
                <div class="img"></div>
                <div class="price">72,000원</div>
                <div class="rate"></div>
            </div>
            <div class="item-box">
                <div class="img"></div>
                <div class="price">98,900원</div>
                <div class="rate"></div>
            </div>
            <div class="item-box">
                <div class="img"></div>
                <div class="price">124,800원</div>
                <div class="rate"></div>
            </div>
        </div>
    </div>

    <script>
        let price = document.querySelectorAll('.price');
        let rate = document.querySelectorAll('.rate');
        let img = document.querySelectorAll('.img');

        for(let i = 0; i < img.length; i++) {
            let random = Math.floor(Math.random() * 200);
            img[i].style = `background-image: url("https://picsum.photos/id/${random}/150");
            background-size: cover;`
        }

        for(let i = 0; i < price.length; i++ ) {
            console.log(price[i].textContent.length);
                let str = price[i].textContent.replace('원', '').replace(',', '');
                let num = parseInt(str);
                console.log(num);
                // FIXME: 중복 되는 코드 최대한 줄여보기
                if(num >= 10000) {
                    let rate1 = num * 0.8;
                    let finalPrice = String(rate1);
                    rate[i].innerHTML = finalPrice.replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,') + '원';
                } else if(num >= 50000 ) {
                    let rate1 = num * 0.9;
                    let finalPrice = String(rate1);
                    rate[i].innerHTML = finalPrice.replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,') + '원';
                } else if(num >= 10000) {
                    let rate1 = num * 0.9;
                    let finalPrice = String(rate1);
                    rate[i].innerHTML = finalPrice.replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,') + '원';
                }
        }
    </script>
</body>
</html>